(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{868:function(e,r,t){"use strict";t.d(r,"a",(function(){return n})),t.d(r,"b",(function(){return o})),t.d(r,"c",(function(){return l}));var n,o,c=t(41);function l(e,r){Object(c.c)(e,r)}!function(e){e.FollowShow="follow_show",e.FollowClick="follow_click",e.FollowCancel="follow_cancel",e.FollowingFeedShow="following_feed_show"}(n||(n={})),function(e){e[e.followCommendCard=0]="followCommendCard",e[e.hotAuthors=1]="hotAuthors",e[e.homeUserPopover=2]="homeUserPopover",e[e.postUserCard=4]="postUserCard",e[e.postTop=5]="postTop",e[e.postStickyBar=6]="postStickyBar",e[e.userCenterTop=7]="userCenterTop",e[e.userCenterStickyBar=8]="userCenterStickyBar",e[e.userCenterMomentFeed=9]="userCenterMomentFeed",e[e.userCenterFollowing=10]="userCenterFollowing",e[e.userCenterTeam=11]="userCenterTeam",e[e.userCenterFollowers=12]="userCenterFollowers",e[e.commentUserPopover=13]="commentUserPopover",e[e.pinFeedUserPopover=14]="pinFeedUserPopover",e[e.pinDiggDetail=15]="pinDiggDetail",e[e.pinDetail=16]="pinDetail",e[e.clubDetail=18]="clubDetail",e[e.searchResult=19]="searchResult",e[e.teamCenterTop=20]="teamCenterTop",e[e.other=100]="other"}(o||(o={}))},884:function(e,r,t){"use strict";t.d(r,"a",(function(){return O}));t(39),t(45),t(19);var n=t(5),o=t(3),c=t(56),l=t(104),v=t(23),f=t(4),d=t(146),w=t(885),h=t(1),m=t(868),y=t(187);function O(){var e,r,t,h=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},O=Object(w.a)(),j=Object(o.r)(),T=Object(o.c)(),F=Object(o.l)(!1),k=Object(o.l)(!1),R=[],S=Object(o.l)(!1),C=Object(o.l)(""),P=Object(o.l)(v.c.UserType),U=Object(o.l)(m.b.other),J=Object(o.l)("关注失败，请稍后重试~"),B=Object(o.l)(""),M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.itemId,t=e.itemType,n=e.isFollow,o=e.teaFollowType,c=e.errorText,l=e.successText;void 0!==r&&(C.value=r),void 0!==t&&(P.value=t),void 0!==n&&(S.value=n),void 0!==o&&(U.value=o),void 0!==c&&(J.value=c),void 0!==l&&(B.value=l),"boolean"==typeof n&&(k.value=!0)},D=function(){var e=Object(n.a)(regeneratorRuntime.mark((function e(r,t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,null==T?void 0:T.proxy.$ensureAuthorized({loginGuideFrom:l.b.focus_login});case 3:e.next=8;break;case 5:return e.prev=5,e.t0=e.catch(0),e.abrupt("return",!1);case 8:if(!r||"string"==typeof r){e.next=10;break}return e.abrupt("return",!1);case 10:if((null!=r?r:C.value)&&(null!=t?t:P.value)){e.next=12;break}return e.abrupt("return",!1);case 12:return e.abrupt("return",!0);case 13:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(r,t){return e.apply(this,arguments)}}(),I=function(){var e=Object(n.a)(regeneratorRuntime.mark((function e(r,t,n){var o,l,w,h,O,x,T,k,R,M;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D(r,t);case 2:if(e.sent){e.next=4;break}return e.abrupt("return",{isSuccess:!1});case 4:return h=null!=r?r:C.value,O=null!=t?t:P.value,x=null!==(o=null==n?void 0:n.successText)&&void 0!==o?o:B.value,T=null!==(l=null==n?void 0:n.errorText)&&void 0!==l?l:J.value,F.value=!0,k=!0,e.prev=10,e.next=13,_({itemId:h,itemType:O});case 13:0===(R=e.sent).err_no?(S.value=!0,x&&c.Message.success(x)):(k=!1,Object(d.a)(R.err_no)||c.Message.error(R.err_msg)),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(10),k=!1,c.Message.error(T);case 21:return F.value=!1,[v.c.UserType,v.c.Team].includes(O)&&(M=null!==(w=null==n?void 0:n.teaFollowType)&&void 0!==w?w:U.value,Object(m.c)(m.a.FollowClick,{follow_status:k?1:0,current_page:Object(y.e)(window.location.href),follow_type:M,to_item_id:h,to_item_type:O===v.c.UserType?0:1})),O===v.c.UserType&&j.dispatch(f.FOLLOW_USER),e.abrupt("return",{isSuccess:k,targetStatus:!0});case 25:case"end":return e.stop()}}),e,null,[[10,17]])})));return function(r,t,n){return e.apply(this,arguments)}}(),E=function(){var e=Object(n.a)(regeneratorRuntime.mark((function e(r,t,n){var o,l,d,w,h,O,_,T,k,R;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D(r,t);case 2:if(e.sent){e.next=4;break}return e.abrupt("return",{isSuccess:!1});case 4:return w=null!=r?r:C.value,h=null!=t?t:P.value,O=null!==(o=null==n?void 0:n.successText)&&void 0!==o?o:B.value,_=null!==(l=null==n?void 0:n.errorText)&&void 0!==l?l:J.value,F.value=!0,T=!0,e.prev=10,e.next=13,x({itemId:w,itemType:h});case 13:0===(k=e.sent).err_no?(S.value=!1,O&&c.Message.success("取消".concat(O))):(T=!1,c.Message.error(k.err_msg)),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(10),T=!1,c.Message.error("取消".concat(_));case 21:return F.value=!1,[v.c.UserType,v.c.Team].includes(h)&&(R=null!==(d=null==n?void 0:n.teaFollowType)&&void 0!==d?d:U.value,Object(m.c)(m.a.FollowCancel,{follow_status:T?1:0,current_page:Object(y.e)(window.location.href),follow_type:R,to_item_id:w,to_item_type:h===v.c.UserType?0:1})),h===v.c.UserType&&j.dispatch(f.UNFOLLOW_USER),e.abrupt("return",{isSuccess:T,targetStatus:!1});case 25:case"end":return e.stop()}}),e,null,[[10,17]])})));return function(r,t,n){return e.apply(this,arguments)}}(),N=function(){var e=Object(n.a)(regeneratorRuntime.mark((function e(r,t,n,o){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(null!=n?n:S.value)){e.next=7;break}return e.next=4,E(r,t,o);case 4:return e.abrupt("return",e.sent);case 7:return e.next=9,I(r,t,o);case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e)})));return function(r,t,n,o){return e.apply(this,arguments)}}(),L=function(e){var r,t,n;var o=null!==(r=null==e?void 0:e.currentPage)&&void 0!==r?r:Object(y.e)(window.location.href),c=null!==(t=null==e?void 0:e.teaFollowType)&&void 0!==t?t:k.value?U.value:void 0,l=null!==(n=null==e?void 0:e.isFollow)&&void 0!==n?n:k.value?S.value:void 0;void 0!==c&&void 0!==l?Object(m.c)(m.a.FollowShow,{current_page:o,follow_type:c,button_status:l?1:0}):R.push({currentPage:o,teaFollowType:c,isFollow:l})};return M(h),Object(o.s)(k,(function(){k.value&&(R.forEach((function(e){var r=e.currentPage,t=e.teaFollowType,n=e.isFollow;L({currentPage:r,teaFollowType:null!=t?t:U.value,isFollow:null!=n?n:S.value})})),R.splice(0,R.length))})),{isFollow:S,followLoading:F,doFollow:(t=Object(n.a)(regeneratorRuntime.mark((function e(r,t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.do((function(){return I(r,t,n)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),function(e,r,n){return t.apply(this,arguments)}),cancelFollow:(r=Object(n.a)(regeneratorRuntime.mark((function e(r,t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.do((function(){return E(r,t,n)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),function(e,t,n){return r.apply(this,arguments)}),toggleFollow:(e=Object(n.a)(regeneratorRuntime.mark((function e(r,t,n,o){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.do((function(){return N(r,t,n,o)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),function(r,t,n,o){return e.apply(this,arguments)}),setFollowInfo:M,traceFollowShow:L}}function _(e){var r=e.itemId,t=e.itemType;return Object(h.d)({url:"/interact_api/v1/follow/do",method:"post",showError:!1,body:{id:r,type:t}})}function x(e){var r=e.itemId,t=e.itemType;return Object(h.d)({url:"/interact_api/v1/follow/undo",method:"post",showError:!1,body:{id:r,type:t}})}},885:function(e,r,t){"use strict";t.d(r,"a",(function(){return l}));t(6);var n=t(10),o=t(11),c=function(){function e(){Object(n.a)(this,e),this.busy=!1}return Object(o.a)(e,[{key:"do",value:function(e){var r=this;return this.busy?Promise.resolve(void 0):(this.busy=!0,Promise.resolve("function"==typeof e?e():e).then((function(e){return r.busy=!1,e})).catch((function(e){return r.busy=!1,Promise.reject(e)})))}}]),e}();function l(){return new c}},895:function(e,r,t){"use strict";t.d(r,"a",(function(){return c})),t.d(r,"b",(function(){return l}));t(19);var n=t(5),o=t(3);function c(){var e=Object(o.c)();return{openReportModal:function(r,t){if(e){var n=e.proxy.$getBean("eventBus");n.emit(n.eventType.REPORT_CONTENT,r,t)}}}}function l(e){var r=Object(o.k)({visible:!1,show:!1});function t(){return(t=Object(n.a)(regeneratorRuntime.mark((function t(n,o){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.$validLogin()){t.next=2;break}return t.abrupt("return");case 2:r.show||(r.show=!0),r.visible=!0,r.itemId=n,r.idType=o;case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return{reportModalData:r,showReportModal:function(e,r){return t.apply(this,arguments)}}}},916:function(e,r,t){"use strict";t.d(r,"b",(function(){return h})),t.d(r,"a",(function(){return m}));t(19);var n=t(5),o=t(3),c=t(7),l=t(60),v=t(29),f=t(17),d=t(219),w=t(55);function h(e){var r=Object(d.c)({maxDurationMS:9e4}),t=r.stayDuration,f=r.isCancelled,w=r.cancel;function h(){return(h=Object(n.a)(regeneratorRuntime.mark((function e(r){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!f.value){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,l.a.AddPointReport({growth_type:v.d.JScore,task_id:v.c.ViewContent,item_id:r});case 5:(t=e.sent).err_no!==c.ERROR_NO.OK?console.warn("error reportViewContentJScore reason:".concat(t.err_msg)):w(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.warn("error reportViewContentJScore err:",e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}Object(o.t)((function(){t.value>=9e4&&function(e){h.apply(this,arguments)}(e)}))}function m(){return y.apply(this,arguments)}function y(){return(y=Object(n.a)(regeneratorRuntime.mark((function e(){var r,t,n,o=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=o.length>0&&void 0!==o[0]&&o[0],t=r?Object(w.f)(sessionStorage.getItem(f.b.reportBindPhoneJScore)||"null"):{growth_type:v.d.JScore,task_id:v.c.BindPhone,item_id:"0"}){e.next=4;break}return e.abrupt("return");case 4:return e.prev=4,r||sessionStorage.setItem(f.b.reportBindPhoneJScore,JSON.stringify(t)),e.next=8,l.a.AddPointReport(t);case 8:(n=e.sent).err_no!==c.ERROR_NO.OK&&console.warn("error reportBindPhoneJScore reason:".concat(n.err_msg)),sessionStorage.removeItem(f.b.reportBindPhoneJScore),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(4),console.warn("error reportBindPhoneJScore, set to sessionStorage, ".concat(JSON.stringify(t)," err:"),e.t0);case 16:case"end":return e.stop()}}),e,null,[[4,13]])})))).apply(this,arguments)}}}]);
//# sourceMappingURL=69ea281.js.map