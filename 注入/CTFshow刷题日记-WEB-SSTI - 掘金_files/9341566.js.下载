(window.webpackJsonp=window.webpackJsonp||[]).push([[50],{1157:function(e,t,n){},1822:function(e,t,n){"use strict";n(1157)},1998:function(e,t,n){"use strict";n.r(t);n(19);var o=n(5),r=n(3),c=n(56),l=n(40),d=n.n(l),v=n(1821),f=n.n(v),y=n(188),m=n(4),h=n(55),x=n(53),j=n(41),w=n(187),_=Object(r.b)({components:{Lazy:y.a,Icon:c.Icon},setup:function(){var e,t=Object(r.c)(),n=Object(r.l)(!1),c=Object(r.l)(""),l=Object(r.l)({w:0,h:0}),v=Object(r.r)(),y=Object(r.l)(),h=Object(r.l)({}),_=Object(r.l)({}),k=Object(r.a)((function(){return null==t?void 0:t.proxy.$device.isMobile}));function T(){return(T=Object(o.a)(regeneratorRuntime.mark((function t(){var o,r,f,x,j,w;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.dispatch(m.TCC_CONFIG,"juejin_float_banner");case 2:if(y.value=t.sent,null===(o=y.value)||void 0===o?void 0:o.id){t.next=5;break}return t.abrupt("return");case 5:if(f=Date.now(),!(y.value.startTime&&f<y.value.startTime)){t.next=8;break}return t.abrupt("return");case 8:if(!(y.value.endTime&&f>y.value.endTime)){t.next=10;break}return t.abrupt("return");case 10:if(x=k.value?y.value.bannerH5:y.value.bannerWeb,c.value=x.iconUrl,l.value={w:x.width,h:x.height},j={width:"".concat(x.width,"px"),height:"".concat(x.height,"px"),right:"".concat(x.initPos.right,"px"),bottom:"".concat(x.initPos.bottom,"px")},h.value=j,_.value={right:"".concat(x.closePos.right,"px"),top:"".concat(x.closePos.top,"px")},e=C(),w=d()(new Date(f)).format("YYYY-MM-DD"),e&&e.id===y.value.id){t.next=23;break}return n.value=!0,O({id:y.value.id,pos:{dx:0,dy:0},frequency:{todayClose:{date:w,closeTime:0},nextDisplayTime:0}}),t.abrupt("return");case 23:if(!(f<e.frequency.nextDisplayTime)){t.next=25;break}return t.abrupt("return");case 25:if(e.frequency.todayClose&&w===e.frequency.todayClose.date||(e.frequency.todayClose={date:w,closeTime:0},O(e)),!((null===(r=y.value.frequencyControl)||void 0===r?void 0:r.dailyLimit)&&e.frequency.todayClose.closeTime>=y.value.frequencyControl.dailyLimit)){t.next=28;break}return t.abrupt("return");case 28:n.value=!0;case 29:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return function(){T.apply(this,arguments)}(),Object(r.s)(n,(function(){n.value&&Object(r.f)((function(){(null==t?void 0:t.proxy.$el)&&(document.body.appendChild(t.proxy.$el),function(t){var n={x:(null==e?void 0:e.pos.dx)||0,y:(null==e?void 0:e.pos.dy)||0};t.style.transform="translate(".concat(n.x,"px, ").concat(n.y,"px)");var o=f()(t);o.draggable({listeners:{move:function(e){n.x+=e.dx,n.y+=e.dy,e.target.style.transform="translate(".concat(n.x,"px, ").concat(n.y,"px)")},end:function(){var e=C();e&&(e.pos.dx=n.x,e.pos.dy=n.y,O(e))}}}),o.on("tap",(function(e){var t;e.originalEvent.srcElement.classList.contains("no-interact")||(Object(j.c)("pendant_click",{current_page:Object(w.e)(window.location.href),from_seo:Object(x.d)()===x.a.seo?"1":"0",click_method:"activity_btn",ad_url:(null===(t=y.value)||void 0===t?void 0:t.action.value)||""}),y.value&&"url"===y.value.action.type&&window.open(y.value.action.value,"_blank"))}))}(t.proxy.$el))}))})),{isMobile:k,imgResize:l,containerStyle:h,iconUrl:c,visible:n,closeStyle:_,onVisibleChange:function(e){var t;e&&Object(j.c)("pendant_show",{current_page:Object(w.e)(window.location.href),from_seo:Object(x.d)()===x.a.seo?"1":"0",ad_url:(null===(t=y.value)||void 0===t?void 0:t.action.value)||""})},onClose:function(){var t;if(Object(j.c)("pendant_click",{current_page:Object(w.e)(window.location.href),from_seo:Object(x.d)()===x.a.seo?"1":"0",click_method:"cross_off"}),n.value=!1,e){e.frequency.todayClose.closeTime+=1;var o=(null===(t=y.value)||void 0===t?void 0:t.frequencyControl.minimumInterval)||{},r=o.unit,c=o.value;r&&c&&(e.frequency.nextDisplayTime=Date.now()+{hour:36e5,minute:6e4,day:864e5}[r]*c),O(e)}}}}});function O(data){try{window.localStorage.setItem("jj_float_banner",JSON.stringify(data))}catch(e){console.error(e)}}function C(){return Object(h.f)(window.localStorage.getItem("jj_float_banner"))}var k=_,T=(n(1822),n(28)),component=Object(T.a)(k,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.visible?n("div",{directives:[{name:"visible-change",rawName:"v-visible-change.once",value:e.onVisibleChange,expression:"onVisibleChange",modifiers:{once:!0}}],staticClass:"global-float-banner",class:{h5:e.isMobile},style:e.containerStyle},[n("Lazy",{attrs:{url:e.iconUrl,resize:e.imgResize,mark:!1}}),e._v(" "),n("div",{staticClass:"close no-interact",style:e.closeStyle,on:{click:function(t){return t.stopPropagation(),e.onClose(t)}}},[n("Icon",{staticClass:"no-interact",attrs:{type:"close"}})],1)],1):e._e()}),[],!1,null,"1e6de0ce",null);t.default=component.exports}}]);
//# sourceMappingURL=9341566.js.map